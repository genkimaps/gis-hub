{#
Displays a map showing the dataset extent on the dataset page sidebar

extent
GeoJSON representation of the geometry to draw (ie the value of the
'spatial' extra)

e.g.
{% set dataset_extent = h.get_pkg_dict_extra(c.pkg_dict, 'spatial', '') %}
{% if dataset_extent %}
{% snippet "spatial/snippets/dataset_map_sidebar.html", extent=dataset_extent %}
{% endif %}

#}

<div class="dataset-filter_map" data-module="dataset-map">
    <div id="dataset-filter-container">
        {# https://docs.ckan.org/en/2.8/theming/javascript.html
        Use Fanstatic to include our custom JavaScript module.
        A script tag for the module will be inserted in the right place at the
        bottom of the page. #}
        {% resource 'dfo/map_filter.js' %}

        {# Apply our JavaScript module to an HTML element. The data-module attribute,
        which can be applied to any HTML element, tells CKAN to initialize an
        instance of the named JavaScript module for the element.
        The initialize() method of our module will be called with this HTML
        element as its this.el object. #}
        <!-- Leaflet css -->
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ==" crossorigin="" />
        <link rel="stylesheet" href="https://unpkg.com/leaflet-draw@1.0.2/dist/leaflet.draw-src.css" />

        <!-- Leaflet JS, after css -->
        <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet-src.js" integrity="sha512-IkGU/uDhB9u9F8k+2OsA6XXoowIhOuQL1NTgNZHY1nkURnqEGlDZq3GsfmdJdKFe1k1zOc6YU2K7qY+hF9AodA==" crossorigin=""></script>
        <script src="https://unpkg.com/leaflet-draw@1.0.2/dist/leaflet.draw-src.js"></script>

        <div id="filtermap"
             data-module="map_filter"
             style="height: 600px;">
        </div>
    </div>
</div>
